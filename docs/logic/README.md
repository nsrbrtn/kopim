# Логика и архитектура приложения Kopim

Этот раздел содержит документацию архитектурных решений и бизнес-логики приложения.

## Структура документации

Каждый документ описывает отдельный аспект архитектуры или бизнес-логики с примерами кода и диаграммами.

## Документы

### Архитектура и дизайн

- [**Архитектура приложения**](architecture.md) — Clean Architecture + DDD, feature-first модульность, трёхслойная структура, Riverpod DI, тестирование
- [**Аналитика**](analytics.md) — логика работы экрана аналитики, агрегация данных и визуализация
- [**Экран конкретного бюджета**](budget_overview_screen.md) — структура экрана бюджета, фильтры и источники данных
- [**Единая модель денег**](money_model.md) — хранение сумм через `minor` + `scale`, правила округления, миграции
- [**Форма предстоящего платежа**](upcoming_payment_form.md) — структура формы, выбор даты/времени, удаление
- [**Идемпотентность автоплатежей**](upcoming_payments_idempotency.md) — защита от дублей, формат ключей, edge-cases

### Процессы и инструкции

- [**Инструкции для ИИ-агентов и ExecPlan**](ai_agents.md) — где лежат правила, когда нужен ExecPlan, как обновлять документацию
- [**Инварианты по фичам**](feature_invariants.md) — доменные требования по ключевым модулям

### Синхронизация и данные

- [**Синхронизация с Firebase**](firebase_sync.md) — механизм offline-first синхронизации между Drift и Firestore, Outbox pattern, алгоритмы слияния данных
- [**Web fallback**](web_fallback.md) — поведение при недоступности Firebase в браузере и ручная выгрузка данных

---

**Примечание**: По мере развития приложения этот раздел будет дополняться новыми документами по архитектурным решениям, паттернам и бизнес-логике.
