# AnalyticsCreditDebtOperationsWidget

## Назначение
Блок для экрана аналитики, который показывает операции по кредитам и долгам за выбранный период.

Виджет размещается под круговой диаграммой трат по категориям и помогает отделить:
- погашение тела долга;
- расходы на обслуживание долга (проценты и комиссии);
- новые заимствования (приток).

## Где используется
- `lib/features/analytics/presentation/analytics_screen.dart` (вкладка расходов, под блоком диаграммы и легенды).

## Источник данных
- `analyticsCreditDebtOperationsProvider` из `lib/features/analytics/presentation/controllers/analytics_providers.dart`.

Провайдер учитывает:
- текущий период аналитики (`analyticsDateWindowProvider`);
- выбранные счета (`analyticsSelectedAccountIdsProvider`);
- счета типов `credit`, `credit_card`, `debt`;
- сервисные категории кредита (`interestCategoryId`, `feesCategoryId`).

## Что отображается
- Итоги по периоду:
  - `Погашение тела`;
  - `Проценты и комиссии`;
  - `Новые займы`;
  - `Отток по долгам` (тело + обслуживание).
- Список последних операций (до 5):
  - тип операции;
  - дата и направление перевода;
  - сумма с признаком оттока/притока.

## Ограничения текущей версии
- Классификация расходов на обслуживание долга привязана к категориям процентов и комиссий кредитов.
- Переводы между долговыми счетами показываются как отдельный тип операции, но не входят в итог `Отток по долгам`.

## Как проверить
1. Открыть экран аналитики и выбрать период, где есть кредитные платежи.
2. Убедиться, что под donut-диаграммой виден блок `Операции по кредитам и долгам`.
3. Проверить, что:
   - `Погашение тела` увеличивается только на переводах в кредит/долг-счет;
   - `Проценты и комиссии` считаются отдельно;
   - `Отток по долгам = Погашение тела + Проценты и комиссии`.
