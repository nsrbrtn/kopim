# настроить мультивалютность в аналитике (в т.ч. для виджета «Остаток денег»): корректно агрегировать доходы/расходы/остаток по валютам или ограничивать выбор счетов одной валютой.

# Идеи улучшения AI Ассистента

### 1. Переход на Tool Use (Function Calling)
Сейчас логика работает по схеме: *Парсинг сигналов (RegEx) -> Загрузка данных -> Промпт -> Ответ*.
Это ограничивает ассистента жестко заданными фильтрами (только "текущий месяц", "прошлый месяц" и т.д.).
**Предложение:** Внедрить "Инструменты" (Tools).
ИИ сам будет решать, какие данные запросить. Например, на вопрос *"Сколько я потратил на такси на прошлой неделе?"* он сам вызовет функцию `getTransactions(category: 'Taxi', period: 'last_week')`. Это сделает ассистента намного умнее и гибче.

### 2. Потоковая генерация (Streaming)
В репозитории сейчас используется метод `generateAnswer`, который ждет полного ответа от сервера.
**Предложение:** Переключиться на `streamAnswer` (он уже есть в сервисе). Пользователь будет видеть текст по мере его появления (как в ChatGPT), что существенно снизит ощущение задержки.

### 3. Расширение контекста
Сейчас ассистент видит только:
- Траты по месяцам
- Топ категорий
- Бюджеты
**Предложение:** Добавить в промпт:
- **Повторяющиеся платежи** (чтобы он мог прогнозировать обязательные расходы).
- **Цели накопления** (чтобы давать советы в контексте целей).
- **Сравнение периодов** (тренды, например, "ты стал тратить на еду на 20% больше").

### 4. Структурированный вывод (JSON Mode)
Сейчас ответ — просто текст.
**Предложение:** Заставить модель возвращать JSON, в котором помимо текста будут "Действия". Например, если ассистент советует сократить расходы, он может вернуть кнопку *"Создать бюджет на Продукты"*, которую приложение отрисует в чате.

### 5. Персонализация (System Prompt)
**Предложение:** Дать пользователю выбор "личности" ассистента: "Строгий финансовый советник", "Поддерживающий коуч" или "Лаконичный аналитик".
